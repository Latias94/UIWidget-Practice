Unity-chan SpringBone マニュアル

■ スプリングボーン窓

スプリングボーン窓はセットアップに使う便利な機能が揃ってます。
スプリングボーン窓はSpringManagerのInspectorの「窓を表示」ボタン、
又はUTJメニューの「スプリングボーン窓」から出せます。

● 表示

・選択ボーンのみ表示
選択されたSpringBoneだけのgizmoが表示されます。
SpringBoneが多いとgizmoの表示が重くなり情報量が多くなりますので
選択されたものだけ表示すると把握しやすくなります。

・選択コライダーのみ表示
選択されたコライダーだけのgizmoが表示されます。

・ボーンのコリジョンを表示
SpringBoneの当たり判定の球体を表示するかどうか。

・ボーン名を表示
Sceneビューにボーン名を表示。
こちらもSpringBoneが多いと重くなりますので必要な時以外は非表示をお勧めします。

● ダイナミクスCSV
ダイナミクスCSVの読み込みと保存機能。

・読み込む
CSVを読み込んでキャラクターのダイナミクス情報をセットアップします。

・保存
キャラクターのダイナミクス情報をCSVに書き出します。

● スプリングボーン
SpringBone関連の機能。

・スプリングボーン追加
選択されたオブジェクトとその子供にSpringBoneコンポーネントを追加します。
SpringBoneが追加されたオブジェクトには子供が必要なので
末端の子供（子供のないオブジェクト）には追加されません。

・基点作成
選択されたSpringBoneに対して基点オブジェクトを作成します。
基点オブジェクトにはSpringBonePivotコンポーネントが追加され、
SpringBoneと同じ階層（SpringBoneの親の子供）に配置されます。

・マネージャーを作成／更新
選択されたオブジェクトにSpringManagerがない場合はSpringManagerを追加し、
そのオブジェクト以下のSpringBoneを検出しSpringManagerに登録しなおします。

・スプリングボーンをミラー
SpringBone情報を左右のどちらかからその逆の方に反転するための
「スプリングボーンをミラー」窓を表示します。（後述）

・選択と子供のスプリングボーンを選択
選択されたオブジェクト以下のSpringBoneをすべて選択。

・選択と子供のマネージャーとボーンを削除
選択されたオブジェクト以下の全SpringBoneとSpringManagerを削除します。

● コリジョン
当たり判定関連の機能。

・球体
選択オブジェクトの子供に新規の球体コライダー（SpringSphereCollider）を作成。

・カプセル
選択オブジェクトの子供に新規のカプセルコライダー（SpringCapsuleCollider）を作成。
カプセルの作成時には対象のボーンに子供がある場合、
そのボーンと子供に合わせて配置しようとします。

・板
選択オブジェクトの子供に新規の板コライダー（SpringPanelCollider）を作成。

・カプセルの位置を親に合わせる
選択されたカプセルの親に他に子供がある場合、そのカプセルの位置を
その親と子供に合わせます。新規作成の時と同じ配置になります。

・スプリングボーンからコリジョンを外す
選択されたSpringBoneからすべてのコリジョンの登録を外します。

・選択と子供のコライダーを削除
選択されたものとそれ以下のオブジェクトのコライダーをすべて削除します。

・クリーンナップ
どのSpringBoneにも登録されていないコライダーを削除します。
また、全SpringBoneのコリジョンのリストにNoneが入っている場合はそれをリストから削除します。


■ スプリングボーンミラー窓
左から右、または右から左へSpringBoneの情報を反転します。
X軸で反転しますので、この機能を使う時はキャラクターは原点に配置し、
左右対称のスタンス（TまたはAなど）にし、キャラクターの前後をZ軸に向くようにしてください。

・選択から取得
選択されたSpringBoneをコピー元にし、X軸の反対側のSpringBoneを自動検出しコピー先として指定します。

・Ｘ＜０のボーンを元に設定
シーン全体から位置のX座標が0より低い位置にある（X座標がマイナスになっている）SpringBoneをコピー元にし、
X軸の反対側のSpringBoneを自動検出しコピー先として指定します。

・Ｘ＞０のボーンを元に設定
シーン全体から位置のX座標が0より大きい位置にある（X座標がプラスになっている）SpringBoneをコピー元にし、
X軸の反対側のSpringBoneを自動検出しコピー先として指定します。

・コピー元を全選択
コピー元として指定してあるSpringBoneをすべて選択します。

・コピー先を全選択
コピー先として指定してあるSpringBoneをすべて選択します。

・全選択
コピー元と先の両方のSpringBoneをすべて選択します。

・コピー元と先の一覧
左側の一列にはコピー元、右側にはコピー元のSpringBoneがリストアップされます。
選択ボタンを押すとコピー先が自動検出されますが、コピー先が見つからない場合、
コピー先が間違っている場合などはピッカーを使って手で設定することができます。

・ミラーを行う
コピー元からコピー先に情報を反転しながらコピーします。
力パラメータはそのままコピーされます。
角度制限は普段はZ軸は体の外側とされていますので、
コピー先でY軸の制限は下限と上限が入れ替わり、Z軸は反転されずにコピーされます。
コライダーは、逆サイドの位置に同じコライダーが見つかった場合は、その逆サイドにものと入れ替われます。
そうでない場合は元のコライダーがそのままコピーされます。


■ 名前で選択窓
厳密にはSpringBoneの機能ではありませんが、SpringBoneのセットアップには役に立ったりします。
オブジェクト名の一部、または追加されているコンポーネントでシーン内のオブジェクトを選択できるツールです。
メニューのUTJ＞「名前で選択窓」から出せます。

・名前
選択したいオブジェクト名の一部。その文字列が入っている名前のオブジェクトが検索されます。
大文字小文字は無視されます。半角アスタリスク（*）のワイルドカードも使用できます。
その位置にどんな文字が入っても選択されます。

また、空白で分けると、2個以降の文字列は絞り込み検索のパターンとなります。
1個目の文字列に当てはまるものの中から、2個以降のどれかの文字列が入っているものだけが選択されます。
たとえばシーン内に
 bone_a
 bone_b
 bone_c
というオブジェクトがある場合、検索欄に
bone _a _b
を入れると、bone_aとbone_bだけが選択されます。

・無視
無視する文字列を指定できます。
名前欄で当てはまったものから、無視欄の文字列が入っているものは除外されます（選択されません）。
複数の文字列を空白で分けて指定できます。

・コンポーネント
上の二つで当てはまるもの中から、ここの文字列が入っている名前の種類（クラス）のコンポーネントが
追加されているものだけが選択されます。ただしコンポーネントの種類が完全に一致する場合は
それを含めたより長いクラス名は選択されません。
たとえば「SpringBon」を入力すると、シーン内のSpringBoneとSpringBonePivotは選択されますが、
「SpringBone」を入れると、SpringBoneのみが検出されます。


■ 親子付け窓
こちらもSpringBone専用のものではありませんが、基点やコリジョンの親子付けによく使います。
骨が多いとHierarchyの窓では親子付けの変更が難しくなるため、
「新しい親」の欄に新しい親となるボーンなどを指定し、
それの子供にしたいオブジェクトを選択し、「親子付け」を押すと選択されたオブジェクトが
指定したものの子供になります。スカートボーンの基点オブジェクトを一気に脚ボーンの子供にしたり、
コライダーの親を一気に変えたりする時に使います。